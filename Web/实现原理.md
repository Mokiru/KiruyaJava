# Java Web开发实现原理

## 一、Web发展历史

### 1. 通信条件

- 需要有服务器端（server）：等待被请求，需要暴露ip和port。
- 需要有客户端（client）：主动发起请求，知晓服务端的ip和port。
- 通信规则（协议）：TCP/IP协议。

### 2. 服务器

（1）服务器的由来

当客户端请求的资源越来越丰富，需求越来越复杂，程序的核心就应该放在解决业务和计算响应数据上，于是出现了服务器**统一接受客户端处理并进行分发到不同的资源**，由各个资源进行处理，最后结果交由服务器响应。

（2）常用服务器

比较常用的有：Tomcat、JBOOS、IBM的WebSphere、BEA的WebLogic以及Apache等。

## 二、Java Web

### 1. 简介

1. Java Web是用Java技术来解决相关Web互联网领域的技术总和。
2. Web包括：web服务器和web客户端两部分。
3. Java在客户端的应用有java applet，很少使用，Java在服务器端的应用非常丰富，比如Servlet，JSP和第三方框架等等。

### 2. C/S体系结构

（1）概念

C/S是Client/Server的缩写，即客户端/服务器结构。

（2）特点

这种结构可以充分利用两端硬件环境的优势，将任务合理分配到客户端和服务器，从而降低了系统的通信开销。同时安全性较高。

### 3. B/S体系结构

（1）概念

B/S是Browser/Server的缩写，即浏览器/服务器结构，统一采用如IE、Firefox、Chrome等浏览器，通过Web浏览器向Web服务器发送请求，由Web服务器进行处理，并将处理结果逐级传回客户端。

（2）特点

节约了开发成本，是一种全新的软件体系结构。这种体系结构已经成为当今应用软件的首选体系结构。安全性相对C/S较低。

## 三、Web应用程序

### 1. 工作原理

（1）静态网站

这些网站使用HTML语言来编写，放在Web服务器上，用户使用浏览器通过HTTP协议请求服务器上的Web页面，服务器上的Web服务器将接收到的用户请求处理后，再发送给客户端浏览器，显示给用户。

（2）动态网站

这些网站通常使用HTML语言和动态脚本语言（如JSP、ASP或者是PHP等）编写，并将编写后的程序部署到Web服务器上，由Web服务器对动态脚本代码进行处理，并转化为浏览器可以解析的HTML代码，返回给客户端浏览器，显示给用户。

### 2. 应用技术

（1）客户端

- HTML：HTML语言是客户端技术的基础，主要用于显示网页信息，有浏览器解释执行，它不需要编译。
- CSS：CSS就是一种叫做样式表的技术，也有人称之为层叠样式表。在制作网页时才有用CSS样式，可以有效地对页面的布局、字体、颜色、背景和其他效果实现更加精确的控制。
- Flash：Flash时一种交互式矢量动画制作技术，它可以包含动画、音频、视频以及应用程序，而且Flash文件比较小，非常适合在Web上应用。
- 客户端脚本技术：客户端脚本技术是指嵌入到Web页面中的程序代码，这些程序代码是一种解释性的语言是一种解释性的语言，浏览器可以对客户端脚本进行解释。应用最广泛的客户端脚本语言是JavaScript脚本，它是Ajax的重要组成部分。

（2）服务端

比较传统和经典的Web服务器端技术主要有：CGI、ASP、SERVLET/JSP、PHP等。

**JSP**：Java Server Page简称JSP，JSP是以Java为基础开发的，所以它沿用Java强大的API功能，JSP页面中的HTML代码用来显示静态内容部分，嵌入到页面中的Java代码与JSP标记用来生成动态的内容。JSP允许程序员编写自己的标签库来完成应用程序的特定要求，JSP可以被预编译，提高了程序的运行速度。另外，JSP开发的应用程序经过一次编译后，便可以随时随地运行，所以在绝大部分系统平台中，代码无需做修改即可在支持JSP的任何服务器中运行。

**Servlet**：Servlet是Java早期的Web服务器端技术，用Java语言编写。无论是从原理和编程方式上，几乎就是[CGI](./CGI.md)的翻版，具有CGI的缺点和优点，与CGI主要不同的是，Servlet对每个请求都是单独启动一个线程，而不是进程。

## 四、Tomcat

### 1. 概念

tomcat是一个符合JavaEE WEB标准的最小的WEB容器，所有的JSP程序一定要有WEB容器的支持才能运行，而且在给定的WEB容器里面都会支持事务处理操作。

### 2. Tomcat目录结构

- bin：启动和关闭tomcat的bat文件。
- conf：配置文件server.xml该文件用于配置server相关的信息，比如tomcat启动的端口号，配置主机（Host）web.xml文件配置与web应用（web应用相当于一个web站点）tomcat-user.xml配置用户名密码和相关权限。
- lib：该目录放置运行tomcat运行时需要的jar包。
- logs：存放日志，当我们需要查看日志的时候，可以查询信息。
- webapps：放置我们的web应用，主机（Tomcat管理的虚拟主机）网站内容。
- work工作目录：该目录用于存放jsp被访问后生成对应的server文件和class文件。

详细内容于[Tomcat](./Tomcat.md)

## 五、HTTP协议

HTTP协议（Hypertext Transfer Protocol 超文本传输协议），是一个客户端请求和回应的标准协议，这个协议详细规定了浏览器和万维网服务器之间相互通信的规则。

### 1. 主要特点

- 支持客户端和服务器模式
- 请求服务简单快速、传输数据类型灵活
- HTTP1.1以后支持持续连接、分摊开销
- 无状态协议，对于事务处理没有记忆能力

### 2. HTTP请求

HTTP请求由三部分组成，分别是：请求行，请求头，请求正文。

（1）请求行

请求行又分为：请求方式，请求路径，请求协议。

（2）请求头

请求头允许客户端向服务器端传递请求的附加信息以及客户端自身的信息。Refere：该请求头指明请求从哪里来。

（3）请求正文

请求正文只有POST方式才有，POST Data里面储存了请求传输的参数。 GET请求方式没有请求正文。

### 3. HTTP响应


在接收和解释请求消息后，服务器返回一个HTTP响应消息，HTTP响应由三个部分组成，分别是状态行、消息报头、响应正文。

（1）消息报头（响应头）

响应头允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对Request-URL所标识的资源进行下一步访问的信息。

Refresh：自动跳转（秒），可以在页面通过meta标签实现，也可在后台实现。

## 六、 Servlet实现

Servlet本质上也是Java类，但要遵循Servlet规范进行编写，没有main()方法，它的创建、使用、销毁都由Servlet容器进行管理（如Tomcat）。详细实现内容于[Servlet实现](./Servlet.md)。





